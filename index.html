<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3Dreams</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-audio-analyser@^1.0.0/dist/aframe-audio-analyser.umd.js"></script>
    <script src="https://unpkg.com/aframe-entity-generator-component@^3.0.0/dist/aframe-entity-generator-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script>

    <script src="audioanalyser-levels-scale.js"></script>
    <script src="scale-y-color.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-mixin
          id="bar"
          geometry="primitive: box"
          material="color: black"
          scale-y-color="from: 10 60 10; to: 180 255 180; maxScale: 15"
        ></a-mixin>
        <audio id="song" src="./mashup.mp3" autoplay loop></audio>
      </a-assets>

      <a-entity
        audioanalyser="src: #song; smoothingTimeConstant: 0.9"
        audioanalyser-levels-scale="max: 50; multiplier: 0.06"
        entity-generator="mixin: bar; num: 64"
        layout="type: circle; radius: 10; plane: xz;"
      ></a-entity>
    </a-scene>

    <script src="./index.js"></script>
    <script src="./StartAudioContext.js"></script>
  </body>
</html>
